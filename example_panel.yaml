    title: TV
    path: ora-in-tv
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            content: |2
                 **<center>Ora in TV</center>**<center>Ultimo update: {{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'timestamp') |replace ('','') }}</center>
                 
                 ---

                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'cover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_1', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; }
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_TV8', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'cover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'cover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rai_3', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_rete_4', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_canale_5', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_italia1', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_italia1', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'nextcategory') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia1', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_la7', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_la7', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_la7', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_TV8', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_TV8', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'cover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_NOVE', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_20', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'cover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_Cielo', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_twenty_seven', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_cine34', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_cine34', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_cine34', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; } 
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_focus', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_focus', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_focus', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; }         
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_top_crime', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; }         
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_italia_2', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; }         
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_dmax', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_dmax', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'cover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_dmax', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; }    
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'logo') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'category') }} </font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming<img src="{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'cover') }}"/>]({{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'nextcategory') }}</font>
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <img src="{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'nextcover') }}"/>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_mediaset_extra', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; }   
      - type: markdown
        content: >2
           **<center>Stasera in TV</center>**<center>Ultimo update: {{ state_attr('sensor.stasera_in_tv_rai_1', 'timestamp') }} </center>

            ---
            
           <img width="50" width="50" src="https://services.tivulaguida.it/{{ state_attr('sensor.stasera_in_tv_rai_1', 'icon') }}"/> {{ state_attr('sensor.stasera_in_tv_rai_1', 'title') }} 
            {{ state_attr('sensor.stasera_in_tv_rai_1', 'start') }} - {{ state_attr('sensor.stasera_in_tv_rai_1', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_rai_1', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_rai_2', 'icon') }}"/>  {{
          state_attr('sensor.stasera_in_tv_rai_2', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_rai_2', 'start') }} - {{ state_attr('sensor.stasera_in_tv_rai_2', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_rai_2', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_rai_3', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_rai_3', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_rai_3', 'start') }} - {{ state_attr('sensor.stasera_in_tv_rai_3', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_rai_3', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_rete_4', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_rete_4', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_rete_4', 'start') }} - {{ state_attr('sensor.stasera_in_tv_rete_4', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_rete_4', 'duration') }} min.)
           
            ---
            
           <img width="50" src="https://services.tivulaguida.it/{{ state_attr('sensor.stasera_in_tv_canale_5', 'icon') }}"/> {{ state_attr('sensor.stasera_in_tv_canale_5', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_canale_5', 'start') }} - {{ state_attr('sensor.stasera_in_tv_canale_5', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_canale_5', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_italia_1', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_italia_1', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_italia_1', 'start') }} - {{ state_attr('sensor.stasera_in_tv_italia_1', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_italia_1', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_la7', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_la7', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_la7', 'start') }} - {{ state_attr('sensor.stasera_in_tv_la7', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_la7', 'duration') }} min.)
           
            ---
            
           **TV8:** {{ state_attr('sensor.stasera_in_tv_tv8', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_tv8', 'start') }} - {{ state_attr('sensor.stasera_in_tv_tv8', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_tv8', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_nove', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_nove', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_nove', 'start') }} - {{ state_attr('sensor.stasera_in_tv_nove', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_nove', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_iris', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_iris', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_iris', 'start') }} - {{ state_attr('sensor.stasera_in_tv_iris', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_iris', 'duration') }} min.)
           
            ---
             
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_mediaset_extra', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_mediaset_extra', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_mediaset_extra', 'start') }} - {{ state_attr('sensor.stasera_in_tv_mediaset_extra', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_mediaset_extra', 'duration') }} min.)
           
            ---
             
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_cielo', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_cielo', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_cielo', 'start') }} - {{ state_attr('sensor.stasera_in_tv_cielo', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_cielo', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_20_mediaset', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_20_mediaset', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_20_mediaset', 'start') }} - {{ state_attr('sensor.stasera_in_tv_20_mediaset', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_20_mediaset', 'duration') }} min.)
           
            ---
            
           **27Mediaset:** {{ state_attr('sensor.stasera_in_tv_27_twentyseven', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_27_twentyseven', 'start') }} - {{ state_attr('sensor.stasera_in_tv_27_twentyseven', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_27_twentyseven', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_dmax', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_dmax', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_dmax', 'start') }} - {{ state_attr('sensor.stasera_in_tv_dmax', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_dmax', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_focus', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_focus', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_focus', 'start') }} - {{ state_attr('sensor.stasera_in_tv_focus', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_focus', 'duration') }} min.)
           
            ---
             
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.stasera_in_tv_cine34', 'icon') }}"/> {{
          state_attr('sensor.stasera_in_tv_cine34', 'title') }} 
           {{ state_attr('sensor.stasera_in_tv_cine34', 'start') }} - {{ state_attr('sensor.stasera_in_tv_cine34', 'stop') }} ({{ state_attr('sensor.stasera_in_tv_cine34', 'duration') }} min.)
           
        card_mod:
          style: |
            ha-card { --ha-card-header-font-size: 20px;
            border-radius: 10px10px 10px 10px;
            border-width: 1px; border-color: black;  }  
      - type: markdown
        content: >2
           **<center>Domani in TV</center>**<center>Ultimo update: {{ state_attr('sensor.domani_in_tv_rai_1', 'timestamp') }} </center>

            ---
            
           <img width="50" width="50" src="https://services.tivulaguida.it/{{ state_attr('sensor.domani_in_tv_rai_1', 'icon') }}"/> {{ state_attr('sensor.domani_in_tv_rai_1', 'title') }} 
            {{ state_attr('sensor.domani_in_tv_rai_1', 'start') }} - {{ state_attr('sensor.domani_in_tv_rai_1', 'stop') }} ({{ state_attr('sensor.domani_in_tv_rai_1', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_rai_2', 'icon') }}"/>  {{
          state_attr('sensor.domani_in_tv_rai_2', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_rai_2', 'start') }} - {{ state_attr('sensor.domani_in_tv_rai_2', 'stop') }} ({{ state_attr('sensor.domani_in_tv_rai_2', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_rai_3', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_rai_3', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_rai_3', 'start') }} - {{ state_attr('sensor.domani_in_tv_rai_3', 'stop') }} ({{ state_attr('sensor.domani_in_tv_rai_3', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_rete_4', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_rete_4', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_rete_4', 'start') }} - {{ state_attr('sensor.domani_in_tv_rete_4', 'stop') }} ({{ state_attr('sensor.domani_in_tv_rete_4', 'duration') }} min.)
           
            ---
            
           <img width="50" src="https://services.tivulaguida.it/{{ state_attr('sensor.domani_in_tv_canale_5', 'icon') }}"/> {{ state_attr('sensor.domani_in_tv_canale_5', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_canale_5', 'start') }} - {{ state_attr('sensor.domani_in_tv_canale_5', 'stop') }} ({{ state_attr('sensor.domani_in_tv_canale_5', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_italia_1', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_italia_1', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_italia_1', 'start') }} - {{ state_attr('sensor.domani_in_tv_italia_1', 'stop') }} ({{ state_attr('sensor.domani_in_tv_italia_1', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_la7', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_la7', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_la7', 'start') }} - {{ state_attr('sensor.domani_in_tv_la7', 'stop') }} ({{ state_attr('sensor.domani_in_tv_la7', 'duration') }} min.)
           
            ---
            
           **TV8:** {{ state_attr('sensor.domani_in_tv_tv8', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_tv8', 'start') }} - {{ state_attr('sensor.domani_in_tv_tv8', 'stop') }} ({{ state_attr('sensor.domani_in_tv_tv8', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_nove', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_nove', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_nove', 'start') }} - {{ state_attr('sensor.domani_in_tv_nove', 'stop') }} ({{ state_attr('sensor.domani_in_tv_nove', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_iris', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_iris', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_iris', 'start') }} - {{ state_attr('sensor.domani_in_tv_iris', 'stop') }} ({{ state_attr('sensor.domani_in_tv_iris', 'duration') }} min.)
           
            ---
             
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_mediaset_extra', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_mediaset_extra', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_mediaset_extra', 'start') }} - {{ state_attr('sensor.domani_in_tv_mediaset_extra', 'stop') }} ({{ state_attr('sensor.domani_in_tv_mediaset_extra', 'duration') }} min.)
           
            ---
             
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_cielo', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_cielo', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_cielo', 'start') }} - {{ state_attr('sensor.domani_in_tv_cielo', 'stop') }} ({{ state_attr('sensor.domani_in_tv_cielo', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_20_mediaset', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_20_mediaset', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_20_mediaset', 'start') }} - {{ state_attr('sensor.domani_in_tv_20_mediaset', 'stop') }} ({{ state_attr('sensor.domani_in_tv_20_mediaset', 'duration') }} min.)
           
            ---
            
           **27Mediaset:** {{ state_attr('sensor.domani_in_tv_27_twentyseven', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_27_twentyseven', 'start') }} - {{ state_attr('sensor.domani_in_tv_27_twentyseven', 'stop') }} ({{ state_attr('sensor.domani_in_tv_27_twentyseven', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_dmax', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_dmax', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_dmax', 'start') }} - {{ state_attr('sensor.domani_in_tv_dmax', 'stop') }} ({{ state_attr('sensor.domani_in_tv_dmax', 'duration') }} min.)
           
            ---
            
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_focus', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_focus', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_focus', 'start') }} - {{ state_attr('sensor.domani_in_tv_focus', 'stop') }} ({{ state_attr('sensor.domani_in_tv_focus', 'duration') }} min.)
           
            ---
             
          <img width="50" src="https://services.tivulaguida.it/{{
          state_attr('sensor.domani_in_tv_cine34', 'icon') }}"/> {{
          state_attr('sensor.domani_in_tv_cine34', 'title') }} 
           {{ state_attr('sensor.domani_in_tv_cine34', 'start') }} - {{ state_attr('sensor.domani_in_tv_cine34', 'stop') }} ({{ state_attr('sensor.domani_in_tv_cine34', 'duration') }} min.)
           
        card_mod:
          style: |
            ha-card { --ha-card-header-font-size: 20px;
            border-radius: 10px10px 10px 10px;
            border-width: 1px; border-color: black;  }
      - type: vertical-stack
        cards:
          - type: markdown
            content: |2
                 {% set start = state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'date_start') %}
                 {% set nextstart = state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'nextdate_start') %}
                 {% set time = now() | as_timestamp| timestamp_custom("%H:%M") %}

                 <img width='70' src="{{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'logo') }}"/>
                 
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'title') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'date_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'date_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'duration') }} min.)  </font>
                 <font size="2">Iniziato da {{(((as_timestamp(strptime(time, "%H:%M"))) - as_timestamp(strptime(start, "%H:%M") )) /60) | int}} min.</font>
                 [<ha-icon icon="mdi:play-circle-outline"></ha-icon> Play streaming]({{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'm3u8_link') }})
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'description')| replace ('None','' )}} </font>
                 
                 ---
                 A seguire:
                 
                 **{{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'nexttitle') }}** 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'nextdate_start') }} - {{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'nextdate_end') }} ({{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'nextduration') }} min.)</font>
                 <font size="2">Inizio tra {{(((as_timestamp(strptime(nextstart, "%H:%M"))) - as_timestamp(strptime(time, "%H:%M") )) /60) | int}} min. </font>
                 
                 <font size="2">{{ state_attr('sensor.ora_e_dopo_in_tv_banco_dei_pugni', 'nextdescription')| replace ('None','' )}} </font>
            card_mod:
              style: |
                ha-card { --ha-card-header-font-size: 20px;
                border-radius: 10px10px 10px 10px;
                border-width: 1px; border-color: black; }
